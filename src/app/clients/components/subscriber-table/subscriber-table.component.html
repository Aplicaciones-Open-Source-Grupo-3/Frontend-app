<div class="table-container">
  <table class="subscribers-table">
    <thead>
      <tr>
        <th>{{ 'CLIENTS.SUBSCRIBERS.NAME' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.PHONE' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.EMAIL' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.VEHICLE_PLATE' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.SUBSCRIPTION_MONTHS' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.START_DATE' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.EXPIRY_DATE' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.PAYMENT_DATE' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.AMOUNT' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.STATUS' | translate }}</th>
        <th>{{ 'CLIENTS.SUBSCRIBERS.ACTIONS' | translate }}</th>
      </tr>
    </thead>
    <tbody>
      @if (subscribers().length === 0) {
        <tr>
          <td colspan="11" class="no-data">
            {{ 'CLIENTS.SUBSCRIBERS.NO_SUBSCRIBERS' | translate }}
          </td>
        </tr>
      }
      @for (subscriber of subscribers(); track subscriber.id) {
        <tr>
          <td>{{ subscriber.name }}</td>
          <td>{{ subscriber.phone }}</td>
          <td>{{ subscriber.email || '-' }}</td>
          <td>{{ subscriber.vehiclePlate || '-' }}</td>
          <td class="text-center">{{ subscriber.subscriptionMonths }}</td>
          <td>{{ subscriber.startDate | date: 'dd/MM/yyyy' }}</td>
          <td>{{ calculateExpiryDate(subscriber.startDate, subscriber.subscriptionMonths) }}</td>
          <td>{{ subscriber.paymentDate | date: 'dd/MM/yyyy' }}</td>
          <td class="text-right">S/ {{ subscriber.amount | number: '1.2-2' }}</td>
          <td>
            <span [class]="getStatusClass(subscriber.status)" class="status-badge">
              {{ 'CLIENTS.SUBSCRIBERS.STATUS_' + subscriber.status.toUpperCase() | translate }}
            </span>
          </td>
          <td>
            <button class="btn-delete" (click)="deleteSubscriber(subscriber.id)">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6"/>
              </svg>
            </button>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>

